<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>close (ZMQ::Context)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 * call-seq:
 *   zmq.close() -&gt; nil
 *
 * Terminates the 0MQ context. If there are no longer any sockets open within
 * context at the time zmq_term() is called then context shall be shut down and
 * all associated resources shall be released immediately.
 *
 * Otherwise, the following applies:
 * - The close() function shall return immediately.
 * - Any blocking operations currently in progress on sockets open within
 *   context shall return immediately with an error code of ETERM.
 * - With the exception of ZMQ::Socket#close(), any further operations on
 *   sockets open within context shall fail with an error code of ETERM.
 * - The actual shutdown of context, and release of any associated resources, shall
 *   be delayed until the last socket within it is closed with ZMQ::Socket#close().
 */
static VALUE context_close (VALUE self_)
{
    void * ctx = NULL;
    Data_Get_Struct (self_, void, ctx);
    
    if (ctx != NULL) {
        int rc = zmq_term (ctx);
        assert (rc == 0);

        DATA_PTR (self_) = NULL;
    }

    return Qnil;
}</pre>
</body>
</html>
